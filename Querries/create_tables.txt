create table oddzial_banku(
    oddzial_id int primary key,
    adres varchar(50)

);

create table klient(
    klient_id INTEGER primary key autoincrement,
    imie varchar(20) not null,
    nazwisko varchar(20) not null,
    pesel varchar(11) not null,
    mieszkanie boolean not null,
    najblizszy_oddzial_id int not null,
    foreign key(najblizszy_oddzial_id) references oddzial_banku(oddzial_id)
);


create table konto(
    nr_konta int primary key,
    klient_id int,
    saldo int,
    foreign key(klient_id) references klient(klient_id)
);

create table karta(
    nr_karty int primary key,
    nr_konta int,
    rodzaj_karty varchar(20),
    foreign key(nr_konta) references konto(nr_konta)
);

create table typ_kredytu(
    typ_kredytu_id INTEGER primary key autoincrement,
    oprocentowanie int,
    maksymalna_kwota int,
    pula_srodkow int,
    aktualna_pula_srodkow int,
    oddzial_id int,
    foreign key(oddzial_id) references oddzial_banku(oddzial_id)
);

create table kredyt_detale(
    kredyt_id INTEGER primary key autoincrement,
    klient_id int,
    typ_kredytu_id int,
    kwota int,
    data_zaciagniecia date,
    data_splaty date,
    foreign key(klient_id) references klient(klient_id),
    foreign key(typ_kredytu_id) references typ_kredytu(typ_kredytu_id)
);

create table przelew(
    przelew_id INTEGER primary key autoincrement,
    nr_konta_nadawcy int not null,
    nr_konta_odbiorcy int not null,
    kwota int not null,
    foreign key(nr_konta_nadawcy) references konto(nr_konta),
    foreign key(nr_konta_odbiorcy) references konto(nr_konta)
);

create table bankomat(
    bankomat_id INTEGER primary key autoincrement,
    oddzial_id int not null,
    foreign key(oddzial_id) references oddzial_banku(oddzial_id)
);

create table transakcja(
    transakcja_id INTEGER primary key autoincrement,
    bankomat_id int not null,
    nr_karty int not null,
    wplata_wyplata int not null,
    foreign key(bankomat_id) references bankomat(bankomat_id),
    foreign key(nr_karty) references karta(nr_karty)
);